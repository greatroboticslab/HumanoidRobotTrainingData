DIY watering automation system build #2
https://www.youtube.com/watch?v=whtCPLuDH5I
Science & Technology
 Hey everyone just another update on the watering system or on the automatic gardening system. So this is the same valve pack I showed in the last video only now I have the house water selector valve I have an intake for the tank when it's set up and I have a nice flow rate sensor and a new piece of wire I will be attaching more sensors to that in the future but for now it's just that sensor and then here we have the same zone 1 2 & 3 valves now all the zones are actually hooked up and functional and I water there's three different zones that we water at any given time but anyway I kind of wanted to show that all this is working it's raining so you won't be able to see any of the trike any of the stuff or any of the drippers running because you know it's raining but anyway so I'm going to log into my and into the controller here yep sorry one-handed typing sucks okay boom all right cool and now you can see the updated system status display some new things well I'm not sure if I had this in the last video the control system which is the Raspberry Pi status got the last time we got a broadcast from it and the CPU temperature we also have all the valves and elements active except for the tank which is obviously not installed yet but I do now have a very very basic if this then that engine built into this guy and it stores those you store those entries in the database and it'll pull once every five seconds to see if you want to execute a new action and I do believe I have an active test one right now but I have a rain delay set so if you have a rain delay set it'll actually scan the array of controls there I'm gonna move it'll actually scan the array of controls in the system to see if the controls are directly related to watering and if the controls are directly related to watering then it'll actually then it'll actually turn the controls off or the valves off or whatever where it won't allow the if this then that engine to activate said valves so that's how you prevent it from watering when you set a rain delay of course of course that can be overridden by the user if you want whatever reason but let's see here boom all right a little bit less noisy in here but anyway so now if I from the command line utility oh if I can spill it right one-handed typing yuck okay so now I'm gonna switch the rain delay that I have set off rain delay zero you'll notice that the test event that I have installed on the engine should go into effect and you should see the area the house water valve open and zone 3 open so yeah and then you can see water is flowing and I've got it in both liters per minute and gallons per minute the flow rate so this is actually pretty cool what that does is the Raspberry Pi has an interrupt set up on it so every time the that a flow rate sensor spins once it creates a single pulse that the Raspberry Pi picks up and it accumulates those pulses over one second and determines the flow rate and then that's broadcast once every five seconds to the web page where it updates so then you'll see me turn my rain delay back on and I'll just turn it on for 12 hours since we're expecting rain for a while whoops a daisies there we go hours you have to give it the length of time in hours so sent the command valves already shut off flow rate should stop in a moment it takes a little bit for the water to stop moving because the valves actually don't close immediately they take a couple seconds to close but anyway yeah so that's basically the system right now still need to develop the front end but I'm totally gonna rewrite the if this then then that engine I'm just super not satisfied with where it is and I think I can do better so I'm gonna have to get that going but anyway yeah this is uh this is the update so far and got a bunch of extra functionality I've got to add a couple more things to the display here you know so for example I want it to show if the rain delay is active you know or whatever but I really do like the idea of being able to tag sensors or controls with certain values and then um selectively you know manipulate those controls so like for example let's pretend that this were deployed in a greenhouse you know and okay well it's you know sure there's a little bit of rain so I don't or that's not a good example but anyway let's just pretend that there are controls that are directly related to outdoor watering and then some controls that are not um and you only want some of those controls to be manipulated during a rain you know when you set the rain delay so that way if you tag your input controls with watering then it knows if there's a rain delay that control needs to be in a certain state so I'd like to do more of that and I would also like to be able to um you know integrate external APIs as kind of virtual sensors and say like oh well you know if it's raining right or you know if I'm expecting rain in the next eight hours you know for some probability then perhaps I should you know just not water this morning or whatever and then you can uh set the rain delay automatically from another quote unquote sensor and it would also be nice to uh set up alarms if all my valves are closed supposedly and then this thing is still going for example you know for more than like we'll say 10 seconds then I know I probably have a leak or a broken pipe or something somewhere and I should attend to that so I can actually throw an alarm condition for that sensor but anyway that's where we're at so far and you know decent amount of work left to go but I've got a pretty solid base finally cheers